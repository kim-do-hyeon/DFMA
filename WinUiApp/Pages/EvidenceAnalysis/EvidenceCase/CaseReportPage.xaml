<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="WinUiApp.Pages.ArtifactsAnalysis.CaseReportPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WinUiApp.Pages.ArtifactsAnalysis"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel
            Grid.Row="0"
            Orientation="Horizontal"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center"
            Margin="32,24,32,12"
            Spacing="16">
            <TextBlock
                Text="케이스 리포트"
                FontSize="32"
                FontWeight="SemiBold"
                VerticalAlignment="Center"/>
            <Button
                x:Name="BackButton"
                Content="시작 화면으로"
                Style="{StaticResource AccentButtonStyle}"
                Click="BackButton_Click"/>
        </StackPanel>

        <ScrollViewer Grid.Row="1">
            <StackPanel Spacing="20" Margin="32,0,32,32">

                <TextBlock
                    x:Name="CasePathTextBlock"
                    Text="케이스 경로를 선택해 주세요."
                    FontSize="16"
                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>

                <ProgressRing
                    x:Name="LoadingRing"
                    IsActive="False"
                    Visibility="Collapsed"
                    Width="32"
                    Height="32"
                    HorizontalAlignment="Left"/>

                <TextBlock
                    x:Name="EmptyStateText"
                    Text="보고할 케이스 정보를 찾을 수 없습니다."
                    Visibility="Collapsed"
                    FontSize="18"
                    FontStyle="Italic"/>

                <Border
                    CornerRadius="12"
                    Padding="20"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1">
                    <StackPanel>
                        <TextBlock
                            Text="케이스 정보"
                            FontSize="22"
                            FontWeight="SemiBold"/>
                        <ListView
                            x:Name="CaseInfoListView"
                            Margin="0,12,0,0"
                            IsItemClickEnabled="False"
                            SelectionMode="None">
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="local:CaseInfoEntry">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock
                                            Grid.Column="0"
                                            Text="{x:Bind Key}"
                                            FontWeight="SemiBold"/>
                                        <TextBlock
                                            Grid.Column="1"
                                            Text="{x:Bind Value}"
                                            TextWrapping="WrapWholeWords"/>
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>

                <Border
                    CornerRadius="12"
                    Padding="20"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1">
                    <StackPanel>
                        <TextBlock
                            Text="이미지 증거 목록"
                            FontSize="22"
                            FontWeight="SemiBold"/>
                        <ListView
                            x:Name="EvidenceListView"
                            Margin="0,12,0,0"
                            IsItemClickEnabled="False"
                            SelectionMode="None">
                            <ListView.Header>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="80"/>
                                        <ColumnDefinition Width="180"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="ID" FontWeight="SemiBold"/>
                                    <TextBlock Grid.Column="1" Text="Type" FontWeight="SemiBold"/>
                                    <TextBlock Grid.Column="2" Text="Value" FontWeight="SemiBold"/>
                                </Grid>
                            </ListView.Header>
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="local:EvidenceSourceEntry">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80"/>
                                            <ColumnDefinition Width="180"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{x:Bind Id}"/>
                                        <TextBlock Grid.Column="1" Text="{x:Bind Type}"/>
                                        <TextBlock Grid.Column="2" Text="{x:Bind Value}" TextWrapping="WrapWholeWords"/>
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="220"/>
                        <ColumnDefinition Width="24"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border
                        Grid.Column="0"
                        CornerRadius="12"
                        Padding="16"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1">
                        <StackPanel>
                            <TextBlock
                                Text="추가 정보"
                                FontSize="20"
                                FontWeight="SemiBold"
                                Margin="0,0,0,8"/>
                            <TextBlock
                                Text="보고 싶은 세부 항목을 선택하세요."
                                FontSize="14"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Margin="0,0,0,12"
                                TextWrapping="Wrap"/>
                            <ListView
                                x:Name="DetailsListView"
                                SelectionMode="Single"
                                SelectionChanged="DetailsListView_SelectionChanged">
                                <ListViewItem Content="이벤트 로그" Tag="EventLogs"/>
                            </ListView>
                        </StackPanel>
                    </Border>

                    <Border
                        x:Name="EventLogCard"
                        Grid.Column="2"
                        CornerRadius="12"
                        Padding="20"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                        BorderThickness="1"
                        Visibility="Collapsed">
                        <StackPanel>
                            <TextBlock
                                Text="이벤트 로그"
                                FontSize="22"
                                FontWeight="SemiBold"/>
                            <ListView
                                x:Name="EventLogListView"
                                Margin="0,12,0,0"
                                IsItemClickEnabled="False"
                                SelectionMode="None">
                                <ListView.Header>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="120"/>
                                            <ColumnDefinition Width="110"/>
                                            <ColumnDefinition Width="160"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Event Time" FontWeight="SemiBold"/>
                                        <TextBlock Grid.Column="1" Text="Level" FontWeight="SemiBold"/>
                                        <TextBlock Grid.Column="2" Text="Source" FontWeight="SemiBold"/>
                                        <TextBlock Grid.Column="3" Text="Message" FontWeight="SemiBold"/>
                                    </Grid>
                                </ListView.Header>
                                <ListView.ItemTemplate>
                                    <DataTemplate x:DataType="local:EventLogEntry">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="120"/>
                                                <ColumnDefinition Width="110"/>
                                                <ColumnDefinition Width="160"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="{x:Bind EventTimeUtc}"/>
                                            <TextBlock Grid.Column="1" Text="{x:Bind Level}"/>
                                            <TextBlock Grid.Column="2" Text="{x:Bind Source}" TextWrapping="WrapWholeWords"/>
                                            <TextBlock Grid.Column="3" Text="{x:Bind Message}" TextWrapping="WrapWholeWords"/>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </StackPanel>
                    </Border>
                </Grid>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>

